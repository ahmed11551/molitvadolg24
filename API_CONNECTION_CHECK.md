# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è API e-Replika

## ‚úÖ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚úÖ

**–§–∞–π–ª:** `src/lib/api.ts`

- ‚úÖ **API_BASE_URL:** `https://bot.e-replika.ru/api` (—Å—Ç—Ä–æ–∫–∞ 4)
- ‚úÖ **getAuthToken():** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `test_token_123` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Å—Ç—Ä–æ–∫–∞ 19)
- ‚úÖ **getAuthHeaders():** –§–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer test_token_123` (—Å—Ç—Ä–æ–∫–∏ 23-40)

### 2. –í—Å–µ –º–µ—Ç–æ–¥—ã eReplikaAPI –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–∫–µ–Ω ‚úÖ

–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ –º–µ—Ç–æ–¥—ã - –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `getAuthHeaders()`:

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –¢–æ–∫–µ–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω | –°—Ç—Ä–æ–∫–∞ |
|-------|----------|-----------------|--------|
| `getTerms()` | `/terms` | ‚úÖ | 112 |
| `convertToHijri()` | `/calendar/convert-to-hijri` | ‚úÖ | 149 |
| `convertFromHijri()` | `/calendar/convert-from-hijri` | ‚úÖ | 181 |
| `getDuaAudio()` | `/duas/{id}/audio` | ‚úÖ | 231 |
| `getDuas()` | `/duas` | ‚úÖ | 292 |
| `getDuaTranslation()` | `/duas/{id}/translation` | ‚úÖ | 335 |
| `getDuaById()` | `/duas/{id}` | ‚úÖ | 366 |
| `getAdhkar()` | `/adhkar` | ‚úÖ | 404 |
| `getSalawat()` | `/salawat` | ‚úÖ | 455 |
| `getKalimas()` | `/kalimas` | ‚úÖ | 504 |
| `getAyahs()` | `/quran/ayahs` | ‚úÖ | 562 |
| `getSurahs()` | `/quran/surahs` | ‚úÖ | 611 |
| `getNamesOfAllah()` | `/names-of-allah` | ‚úÖ | 660, 675 |
| `generatePDFReport()` | `/reports/pdf` | ‚úÖ | 740 |

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö ‚úÖ

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `eReplikaAPI`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–∫–µ–Ω:

- ‚úÖ `DuaCardV2.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `eReplikaAPI.getDuaAudio()` –∏ `eReplikaAPI.getDuaTranslation()`
- ‚úÖ `DuaSectionV2.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `eReplikaAPI.getDuas()`
- ‚úÖ `AdhkarSectionV2.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `eReplikaAPI.getAdhkar()`
- ‚úÖ `SmartTasbihV2.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `eReplikaAPI`
- ‚úÖ `dhikr-data.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã `eReplikaAPI`
- ‚úÖ `prayer-calculator.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `eReplikaAPI.convertToHijri()` –∏ `convertFromHijri()`
- ‚úÖ `TermsDictionary.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `eReplikaAPI.getTerms()`
- ‚úÖ `ReportsSection.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `eReplikaAPI.generatePDFReport()`

### 4. –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª ‚úÖ

**–§–∞–π–ª:** `src/lib/api-test.ts`

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `test_token_123` (—Å—Ç—Ä–æ–∫–∏ 6, 73)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `API_BASE_URL`

---

## ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –§–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
headers["Authorization"] = `Bearer ${token}`;
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ `Bearer test_token_123`

### 2. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ getDuaAudio()

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `getDuaAudio()` –ø—Ä–æ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –Ω–æ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `getAuthHeaders()` ‚úÖ

### 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ getNamesOfAllah()

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ –ø—Ä–æ–±—É–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –Ω–æ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `getAuthHeaders()` ‚úÖ

---

## üîç –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `getAuthHeaders()`:
```typescript
console.debug("Using auth token:", token ? "***" + token.slice(-3) : "none");
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API

–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–∫–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ `Bearer test_token_123`

### 3. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ 401/403

–ï—Å–ª–∏ API –≤–µ—Ä–Ω–µ—Ç 401 (Unauthorized), —ç—Ç–æ –º–æ–∂–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å:
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞
- –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π –≤—ã–≤–æ–¥

**–í—Å–µ –º–µ—Ç–æ–¥—ã e-Replika API –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã —Å —Ç–æ–∫–µ–Ω–æ–º `test_token_123`**

- ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `getAuthHeaders()`
- ‚úÖ –¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `Bearer test_token_123`
- ‚úÖ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: `https://bot.e-replika.ru/api`
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API

**–ù–µ—Ç –º–µ—Å—Ç, –≥–¥–µ API –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ —Ç–æ–∫–µ–Ω–∞.**

